<!-- Example template code for forgot-pw.tpl -->
<!-- Add this CAPTCHA section to your existing forgot password form -->

<div class="form-group">
    <label for="username">Username/Email:</label>
    <input type="text" name="username" id="username" class="form-control" required>
</div>

<!-- CAPTCHA Section -->
<div class="form-group">
    <label for="captcha">Kode Verifikasi:</label>
    <div style="display: flex; align-items: center; gap: 10px;">
        <img src="{$_url}login/captcha-image/" 
             alt="CAPTCHA" 
             id="captcha-image" 
             style="border: 1px solid #ccc; cursor: pointer;"
             onclick="refreshCaptcha()"
             title="Klik untuk refresh CAPTCHA">
        <button type="button" onclick="refreshCaptcha()" class="btn btn-sm btn-secondary">
            ðŸ”„ Refresh
        </button>
    </div>
    <input type="text" 
           name="captcha" 
           id="captcha" 
           class="form-control" 
           placeholder="Masukkan kode di atas" 
           required 
           style="margin-top: 5px; max-width: 150px;">
    <small class="text-muted">Masukkan kode verifikasi yang terlihat pada gambar</small>
</div>

<div class="form-group">
    <button type="submit" class="btn btn-primary">Reset Password</button>
</div>

<script>
function refreshCaptcha() {
    // Refresh CAPTCHA image
    var img = document.getElementById('captcha-image');
    img.src = '{$_url}login/captcha-image/?' + Math.random();
    
    // Clear captcha input
    document.getElementById('captcha').value = '';
    
    // Focus on captcha input
    document.getElementById('captcha').focus();
}

// Auto-refresh CAPTCHA when page loads
document.addEventListener('DOMContentLoaded', function() {
    refreshCaptcha();
});
</script>

<style>
.form-group {
    margin-bottom: 15px;
}

#captcha-image {
    height: 40px;
    background: #f8f9fa;
}

#captcha-image:hover {
    opacity: 0.8;
}
</style>
